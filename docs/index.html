<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MEH1K78985"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-MEH1K78985')</script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="description" content="You can download the game here">
    <meta name="author" content="BBpezsgo">
    <meta property="og:image" content="https://bbpezsgo.github.io/nothing.github.io/imgs/img.png">
    <meta name="twitter:image" content="https://bbpezsgo.github.io/nothing.github.io/imgs/img.png">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="icon" type="image/x-icon" href="https://bbpezsgo.github.io/nothing.github.io/imgs/icons/favicon.ico">
    <link rel="icon" href="https://bbpezsgo.github.io/nothing.github.io/imgs/icons/ico32.png" sizes="32x32">
    <link rel="icon" href="https://bbpezsgo.github.io/nothing.github.io/imgs/icons/ico64.png" sizes="64x64">
    <link rel="icon" href="https://bbpezsgo.github.io/nothing.github.io/imgs/icons/ico128.png" sizes="128x128">
    <link rel="icon" href="https://bbpezsgo.github.io/nothing.github.io/imgs/icons/ico256.png" sizes="256x256">
    <link rel="icon" href="https://bbpezsgo.github.io/nothing.github.io/imgs/icons/ico518.png" sizes="518x518">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <title>
        Nothing
    </title>
    <script>
        document.addEventListener('contextmenu', event => event.preventDefault())
    </script>
    <script src="menuManager.js"></script>
</head>

<body onload="OnLoad()">
    <script type="module" src="app.js"></script>

    <div id="loading" class="panel-menu menu hidden">
        Loading...
    </div>

    <div id="user" class="hidden menu" style="width: 100%; height: 100%;">
        <div id="logged-out" class="panel-menu">
            <div class="menuHeader">
                Account
            </div>

            <span id="login-error" class="error-text" style="display: none;">
                <i class="material-icons"
                    style="font-size: 16px; transform: translateY(3px); margin-right: 5px;">&#xe000;</i><span
                    id="login-error-message">Error</span></span>

            <form onsubmit="window.Login(); return false" style="transform: translateX(-2px);">
                <span>Logged out</span>
                <input type="email" id="email" placeholder="email" style="margin-bottom: 0px;" required />
                <input type="password" id="password" placeholder="password" style="margin-bottom: 0px;" required />
                <input type="submit" class="button" value="Login" style="width: calc(100% - 16px);" />
            </form>

            <div class="button" onclick="ShowMenu('downloads')">Back</div>
        </div>

        <div id="logged-in" class="panel-menu">
            <div class="menuHeader">
                Account
            </div>

            <p>
                Logged in as<br>
                <b><span id="firebase-displayName"></span></b>
            <div class="tooltip" id="firebase-isAnonymous"><img width="16" height="16" src="./imgs/anonymous.png"
                    class="mini-icon">
                <span class="tooltiptext">Anonymous</span>
            </div>
            </p>
            <ul>
                <li>
                    Email: <span id="firebase-email"></span>
                    <div class="tooltip" id="firebase-emailVerified"><img width="16" height="16"
                            src="./imgs/verified.svg" class="mini-icon">
                        <span class="tooltiptext">Verified</span>
                    </div>
                    <div class="tooltip" id="firebase-emailUnverified"><img width="16" height="16"
                            src="./imgs/unverified.svg" class="mini-icon">
                        <span class="tooltiptext">Unverified</span>
                    </div>
                    <div class="tooltip" id="firebase-multiFactor"><img width="16" height="16" src="./imgs/2fa.svg"
                            class="mini-icon">
                        <span class="tooltiptext">2FA</span>
                    </div>
                </li>
                <li>
                    PhoneNumber: <span id="firebase-phoneNumber"></span>
                </li>
                <li>
                    PhotoURL: <span id="firebase-photoURL"></span>
                </li>
                <li>
                    UID: <span id="firebase-uid"></span>
                </li>
            </ul>
            <div class="button" onclick="window.Logout()">Logout</div>
            <div class="button" onclick="ShowMenu('downloads')">Back</div>
        </div>
    </div>

    <div id="downloads" class="panel-menu menu">
        <div class="menuHeader">
            Nothing
        </div>

        <div class="button" id="on-show-user-panel" onclick="ShowMenu('user')">Account</div>

        <a download
            href="https://onedrive.live.com/download?cid=6AEB0DA011C539BF&resid=6AEB0DA011C539BF%212453&authkey=AKaz2TB9zzdgAJg">
            <div class="button">Download for PC</div>
        </a>

        <a download
            href="https://onedrive.live.com/download?cid=6AEB0DA011C539BF&resid=6AEB0DA011C539BF%2153953&authkey=AO3BX-CNR5RWxCI">
            <div class="button">Download for Android</div>
        </a>
    </div>

    <div id="prove-human" class="panel-menu menu" style="display: none;">
        <div class="menuHeader">
            Wait...
        </div>

        <div id="prove-human-form-body" style="margin: 0 15px;">
            <p>Who the hell are you???</p>
            <p>You shouldn't be looking at this page because I didn't share the link.</p>
            <p>But once you're here...</p>
            <form onsubmit="ProveHuman(); return false" method="post">
                <div>
                    <label for="prove-human-answer">Are you a human?</label>
                    <input type="text" id="prove-human-answer" name="name" placeholder="No I'm a robot :(" required>
                    <label for="prove-human-prove">If yes, prove it: (idk how)</label>
                    <input type="text" id="prove-human-prove" name="desc" placeholder="">
                </div>
                <input class="button" type="submit" value="OK" style="width: calc(100% - 20px);">
            </form>
        </div>
        <div id="prove-human-upload-done" style="margin: 0 15px; display: none;">
            <i class="fas fa-check-circle" style="font-size: 32px; display: inline;"></i>
            <b>Thanks.</b>
            <div id="prove-human-upload-done-spinner">
                Uploading...
            </div>
            <button class="button" onclick="HideProveHuman()" style="width: calc(100% - 20px);">OK</button>
        </div>
    </div>

    <script src="analysis.js"></script>

    <!-- OnLoad -->
    <script>
        function OnLoad() {
            OnVisit()
            Analyze()
            // document.getElementById('downloads').classList.remove('hidden')
            // InitProveHuman()
        }
    </script>
    
    <script>
        function HideProveHuman() {
            document.getElementById("prove-human").style.display = "none";
            document.getElementById('downloads').classList.remove('hidden');
        }

        function InitProveHuman() {
            const provedCookie = GetCookie('proved')
            
            if (provedCookie === 'dismissed' || provedCookie === '') {
            } else {
                document.getElementById('downloads').classList.remove('hidden')
                return
            }

            const modal = document.getElementById("prove-human");
            modal.style.display = "block";

            const form = document.querySelector('#prove-human-form-body form');
            const thankYouMessage = document.getElementById("prove-human-upload-done");
            const formBody = document.getElementById("prove-human-form-body");
            form.addEventListener('submit', (e) => {
                e.preventDefault()
                document.querySelector('#prove-human > div.menuHeader').textContent = "Okay"
                thankYouMessage.style.display = "block"
                formBody.style.display = "none"
            })
        }

        function ProveHuman() {
            SetCookie('proved', 'proved', 365)
            const title = document.getElementById('prove-human-answer').value
            const desc = document.getElementById('prove-human-prove').value
            const spinner = document.getElementById('prove-human-upload-done-spinner')

            const xhr = new XMLHttpRequest()
            xhr.onreadystatechange = function () {
                const state = {
                    0: 'UNSENT',
                    1: 'OPENED',
                    2: 'HEADERS_RECEIVED',
                    3: 'LOADING',
                    4: 'DONE'
                }
                if (xhr.readyState == 4) {
                    spinner.style.display = 'none'
                } else {
                    spinner.style.display = 'block'
                }
            }

            xhr.open("POST", 'https://api.trello.com/1/cards/?idList=6362a372ef956c01233b798f&token=84de6f5cbc9e3fb5df77596358352cc839e1dea58d8dbb0857919f39b6143acf&key=16160910964e82904e57646c84c9fb69&name=' + title + '&desc=' + desc, true)
            xhr.setRequestHeader('Content-Type', 'application/json')
            xhr.send()
        }
    
        function ProveHumanDismiss() {
            SetCookie('proved', 'dismissed', 365)
            const title = 'Someone dismissed the human-prove form'
            const desc = 'on site nothing.github.io at ' + new Date().toString()
            const xhr = new XMLHttpRequest()
            xhr.open("POST", 'https://api.trello.com/1/cards/?idList=6362a372ef956c01233b798f&token=84de6f5cbc9e3fb5df77596358352cc839e1dea58d8dbb0857919f39b6143acf&key=16160910964e82904e57646c84c9fb69&name=' + title + '&desc=' + desc, true)
            xhr.setRequestHeader('Content-Type', 'application/json')
            xhr.send()
        }
    </script>

    <!-- Supported OS -->
    <script>
        function ResetDownloadButtons() {

            if (getOS() == 'win') {
                SetButtonsEnabled(true, "platform-windows")
            } else {
                SetButtonsEnabled(false, "platform-windows")
                OpenModal()
            }

            if (getOS() == 'android') {
                SetButtonsEnabled(true, "platform-android")
            } else {
                SetButtonsEnabled(false, "platform-android")
            }
        }

        function SetButtonsEnabled(enabled, tags) {
            const buttons = document.getElementsByClassName(tags)
            for (let i = 0; i < buttons.length; i++) {
                const button = buttons[i];
                if (enabled == true) {
                    if (button.classList.contains("disabled")) {
                        button.classList.remove("disabled")
                    }
                } else {
                    if (button.classList.contains("disabled")) {
                    } else {
                        button.classList.add("disabled")
                    }
                }
            }
        }
    </script>
</body>

</html>